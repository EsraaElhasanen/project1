name: automate ci pipeline

on:
  push:
   
    branches: [main]



jobs:
  
  job1:
   
    runs-on: ubuntu-latest

    steps:

      - name: Create Distro Branch
        uses: peterjgrainger/action-create-branch@v2.2.0
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} 
        with:  
          branch: 'Distro'

      
      - name: Trigger jenkins job
        uses: jabbukka/jenkins-trigger@main
        with:
          url: ${{ secrets.JENKINS_URL }}       
          job_name: "Backed-CI"      
          user_name: ${{ secrets.JENKINS_USER }}    
          api_token: ${{ secrets.JENKINSTOKEN }}   
          

            
